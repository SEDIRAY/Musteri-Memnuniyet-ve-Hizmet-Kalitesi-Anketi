<!DOCTYPE html>
<html class="light" lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Müşteri geri bildirim anketi — yaklaşık 3 dakika sürer.">
  <title>Müşteri Memnuniyeti Anketi</title>

  <!-- Tailwind config ÖNCE -->
  <script>
    tailwind = tailwind || {};
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#137fec",
            "background-light": "#f6f7f8",
            "background-dark": "#101922",
          },
          fontFamily: {
            "display": ["Inter", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.25rem",
            "lg": "0.5rem",
            "xl": "0.75rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>

  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    input[type="checkbox"]:disabled + p {
      color: #94a3b8;
    }
    /* Visible focus styles for keyboard users (fallback) */
    :where(button, a, input, select, textarea):focus {
      outline: 3px solid rgba(19,127,236,0.18);
      outline-offset: 3px;
    }
    /* Visually-hidden text */
    .sr-only {
      position: absolute !important;
      height: 1px; width: 1px;
      overflow: hidden;
      clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-[#0d141b] dark:text-slate-200">
  <div class="relative flex h-auto min-h-screen w-full flex-col items-center justify-center p-4 group/design-root" style='font-family: Inter, "Noto Sans", sans-serif;'>
    <div class="w-full max-w-lg rounded-xl bg-white dark:bg-slate-900 shadow-lg border border-slate-200 dark:border-slate-800 p-8 sm:p-10">
      <div class="flex flex-col items-center text-center">
        <div class="mb-6">
          <div class="flex items-center justify-center size-16 rounded-full bg-primary/10 text-primary">
            <span class="material-symbols-outlined !text-4xl">rate_review</span>
          </div>
        </div>

        <!-- Language toggle -->
        <div class="w-full flex justify-end mb-2">
          <div role="toolbar" aria-label="Dil seçimi" class="inline-flex rounded-md shadow-sm" id="lang-toolbar">
            <button
              id="lang-tr"
              type="button"
              class="px-3 py-1 rounded-l-md font-medium focus:outline-none
                     bg-primary/10 text-primary hover:bg-primary/20"
              aria-pressed="true"
            >
              TR
            </button>
            <button
              id="lang-en"
              type="button"
              class="px-3 py-1 rounded-r-md font-medium focus:outline-none
                     bg-transparent text-slate-600 hover:bg-slate-100"
              aria-pressed="false"
            >
              EN
            </button>
          </div>
        </div>

        <!-- HeadlineText Component -->
        <h1 id="survey-heading" class="text-[#0d141b] dark:text-white tracking-tight text-2xl sm:text-3xl font-bold leading-tight">
          Müşteri Memnuniyeti Anketi
        </h1>

        <!-- BodyText Component -->
        <p id="intro-text" class="text-slate-600 dark:text-slate-400 text-base font-normal leading-normal mt-2">
          Görüşleriniz bizim için önemli. Lütfen kısa anketi doldurmak için birkaç dakikanızı ayırın.
        </p>
      </div>

      <div class="my-8 space-y-4" role="region" aria-labelledby="survey-heading">
        <!-- ListItem Component 1 -->
        <div class="flex items-center gap-4 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg">
          <div class="text-primary flex items-center justify-center rounded-lg bg-primary/10 dark:bg-primary/20 shrink-0 size-10">
            <span class="material-symbols-outlined">lightbulb</span>
          </div>
          <p id="list-1" class="text-[#0d141b] dark:text-slate-200 text-base font-normal leading-normal flex-1 truncate">
            Deneyiminizi geliştirmemize yardımcı olun
          </p>
        </div>

        <!-- ListItem Component 2 -->
        <div class="flex items-center gap-4 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg">
          <div class="text-primary flex items-center justify-center rounded-lg bg-primary/10 dark:bg-primary/20 shrink-0 size-10">
            <span class="material-symbols-outlined">timer</span>
          </div>
          <p id="list-2" class="text-[#0d141b] dark:text-slate-200 text-base font-normal leading-normal flex-1 truncate">
            Yaklaşık 3 dakika sürer
          </p>
        </div>
      </div>

      <div class="border-t border-slate-200 dark:border-slate-800 pt-6">
        <!-- Semantic form: Start survey -->
        <form id="survey-form" aria-labelledby="survey-heading" novalidate>
          <!-- Checklists Component -->
          <div class="px-1">
            <label class="flex gap-x-3 py-3 flex-row items-start cursor-pointer" for="consent-checkbox">
              <input
                class="h-5 w-5 rounded border-[#cfdbe7] dark:border-slate-600 border-2 bg-transparent text-primary
                       checked:bg-primary checked:border-primary focus:ring-0 focus:ring-offset-0 focus:border-primary
                       dark:checked:bg-primary dark:checked:border-primary mt-0.5 shrink-0"
                id="consent-checkbox"
                name="consent"
                type="checkbox"
                aria-describedby="consent-desc"
                aria-required="true"
              />
              <p id="consent-desc" class="text-slate-600 dark:text-slate-400 text-sm font-normal leading-relaxed">
                KVKK/GDPR politikasının
                <a class="text-primary hover:underline font-medium" href="#" id="kvkk-link">hüküm ve koşullarını</a>
                kabul ediyorum.
              </p>
            </label>
          </div>

          <!-- CTA Button -->
          <div class="mt-4">
            <button
              id="start-btn"
              type="submit"
              class="w-full bg-primary text-white font-semibold py-3 px-4 rounded-lg hover:bg-primary/90
                     focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50
                     disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed
                     disabled:text-slate-500 transition-colors duration-200"
              aria-disabled="true"
              disabled
            >
              Anketi Başlat
            </button>
          </div>
        </form>
      </div>

    </div>
  </div>

  <script>
    (function () {
      const translations = {
        tr: {
          title: 'Müşteri Memnuniyeti Anketi',
          meta: 'Müşteri geri bildirim anketi — yaklaşık 3 dakika sürer.',
          intro: 'Görüşleriniz bizim için önemli. Lütfen kısa anketi doldurmak için birkaç dakikanızı ayırın.',
          list1: 'Deneyiminizi geliştirmemize yardımcı olun',
          list2: 'Yaklaşık 3 dakika sürer',
          consent: 'KVKK/GDPR politikasının <a class="text-primary hover:underline font-medium" href="#" id="kvkk-link">hüküm ve koşullarını</a> kabul ediyorum.',
          start: 'Anketi Başlat',
          agreeMsg: 'Devam etmek için lütfen şartları kabul edin.',
          startingMsg: 'Anket başlatılıyor...'
        },
        en: {
          title: 'Customer Feedback Survey',
          meta: 'Customer feedback survey — takes about 3 minutes.',
          intro: 'Your feedback is important to us. Please take a moment to complete this short survey.',
          list1: 'Help us improve your experience',
          list2: 'Takes about 3 minutes',
          consent: 'I agree to the <a class="text-primary hover:underline font-medium" href="#" id="kvkk-link">terms and conditions</a> of the KVKK/GDPR policy.',
          start: 'Start Survey',
          agreeMsg: 'Please agree to the terms to continue.',
          startingMsg: 'Starting the survey...'
        }
      };

      const els = {
        html: document.documentElement,
        metaDesc: document.querySelector('meta[name="description"]'),
        heading: document.getElementById('survey-heading'),
        intro: document.getElementById('intro-text'),
        list1: document.getElementById('list-1'),
        list2: document.getElementById('list-2'),
        consent: document.getElementById('consent-desc'),
        startBtn: document.getElementById('start-btn'),
        checkbox: document.getElementById('consent-checkbox'),
        form: document.getElementById('survey-form'),
        langTR: document.getElementById('lang-tr'),
        langEN: document.getElementById('lang-en')
      };

      let currentMessages = translations.tr;

      function setLangButtonStyles(lang) {
        if (!els.langTR || !els.langEN) return;

        if (lang === 'tr') {
          els.langTR.className =
            'px-3 py-1 rounded-l-md font-medium focus:outline-none bg-primary/10 text-primary hover:bg-primary/20';
          els.langEN.className =
            'px-3 py-1 rounded-r-md font-medium focus:outline-none bg-transparent text-slate-600 hover:bg-slate-100';
        } else {
          els.langTR.className =
            'px-3 py-1 rounded-l-md font-medium focus:outline-none bg-transparent text-slate-600 hover:bg-slate-100';
          els.langEN.className =
            'px-3 py-1 rounded-r-md font-medium focus:outline-none bg-primary/10 text-primary hover:bg-primary/20';
        }
      }

      function applyLang(lang) {
        const t = translations[lang] || translations.tr;
        currentMessages = t;

        document.documentElement.lang = lang;
        document.title = t.title;

        if (els.metaDesc) els.metaDesc.setAttribute('content', t.meta);
        if (els.heading) els.heading.textContent = t.title;
        if (els.intro) els.intro.textContent = t.intro;
        if (els.list1) els.list1.textContent = t.list1;
        if (els.list2) els.list2.textContent = t.list2;
        if (els.consent) els.consent.innerHTML = t.consent;
        if (els.startBtn) els.startBtn.textContent = t.start;

        if (els.langTR && els.langEN) {
          els.langTR.setAttribute('aria-pressed', String(lang === 'tr'));
          els.langEN.setAttribute('aria-pressed', String(lang === 'en'));
          setLangButtonStyles(lang);
        }

        localStorage.setItem('surveyLang', lang);
      }

      // Initialize language from localStorage or browser
      const rawStoredLang = localStorage.getItem('surveyLang');
      const storedLang = (rawStoredLang === 'tr' || rawStoredLang === 'en')
        ? rawStoredLang
        : (navigator.language && navigator.language.startsWith('tr') ? 'tr' : 'en');

      applyLang(storedLang);

      // Language toggle handlers
      if (els.langTR) els.langTR.addEventListener('click', () => applyLang('tr'));
      if (els.langEN) els.langEN.addEventListener('click', () => applyLang('en'));

      // Consent & form behavior
      const { checkbox, startBtn, form } = els;
      if (!form || !checkbox || !startBtn) return;

      // Initialize checkbox from storage
      const storedConsent = localStorage.getItem('surveyConsent');
      if (storedConsent === 'true') checkbox.checked = true;

      function updateButtonState() {
        const enabled = checkbox.checked === true;
        startBtn.disabled = !enabled;
        startBtn.setAttribute('aria-disabled', String(!enabled));
      }

      checkbox.addEventListener('change', updateButtonState);

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        if (!checkbox.checked) {
          checkbox.focus();
          showTemporaryMessage(currentMessages.agreeMsg);
          return;
        }
        localStorage.setItem('surveyConsent', 'true');
        showTemporaryMessage(currentMessages.startingMsg);
        // TODO: burada anket sayfasına yönlendirme veya callback çağrısı yapılacak
        // window.location.href = '/anket';
      });

      function showTemporaryMessage(text) {
        let region = document.getElementById('sr-live-region');
        if (!region) {
          region = document.createElement('div');
          region.id = 'sr-live-region';
          region.className = 'sr-only';
          region.setAttribute('aria-live', 'polite');
          document.body.appendChild(region);
        }
        region.textContent = text;
        setTimeout(() => { region.textContent = ''; }, 2500);
      }

      // initial sync
      updateButtonState();
    })();
  </script>
</body>
</html>
